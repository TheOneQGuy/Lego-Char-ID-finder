<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Character & Tint ID finder</title>
  <style>
    /* Make width:100% include padding & borders */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 2em auto;
    }
    section {
      border: 1px solid #ccc;
      padding: 1em;
      margin-bottom: 2em;
    }

    /* Full-width controls */
    input[type="text"],
    textarea,
    input[type="file"],
    input[type="color"],
    button {
      width: 100%;
      font-size: 1em;
      margin: 0.5em 0;
    }

    /* Character-list textarea tweaks */
    #charList {
      resize: vertical;
      min-height: 2em;
      overflow-x: hidden;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    pre {
      background: #f4f4f4;
      padding: 1em;
      white-space: pre-wrap;
    }

    .dropdown-content {
      display: none;
      padding: 0.5em;
      border: 1px solid #aaa;
      margin: 0.5em 0;
    }
    .dropdown.open .dropdown-content {
      display: block;
    }

    .toggle-btn {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: none;
      border: 1px solid #ccc;
      padding: 0.5em;
      cursor: pointer;
    }

    .triangle {
      display: inline-block;
      transform: rotate(180deg);
    }
    .dropdown.open .triangle {
      transform: rotate(0deg);
    }

    .small-color {
      padding: 0;
      border: none;
      vertical-align: middle;
      /* width/height inherited from input[type=color] above */
    }

    input[type=color] {
      -webkit-appearance: none;
      border: none;
      padding: 0;
    }
    input[type=color]::-webkit-color-swatch-wrapper {
      padding: 0;
    }
    input[type=color]::-webkit-color-swatch {
      border: 1px solid gray;
    }

    #imageCanvas {
      display: block;
      margin: 0.5em auto;
      border: 1px solid #ccc;
      cursor: crosshair;
    }
    #glCanvas {
      display: none;
    }
  </style>
</head>
<body>

<section>
  <h2>Characters IDs</h2>
  <label>Name → ID</label>
  <input id="charName" type="text" placeholder="e.g. IRONMANMARK6" />
  <button onclick="charNameToID()">Get ID</button>
  <pre id="charNameOut"></pre>
  <hr/>
  <label>ID → Name (requires list)</label>
  <input id="charID" type="text" placeholder="e.g. -2138279224" />
  <textarea id="charList" rows="4" placeholder="One name per line…"></textarea>
  <button onclick="charIDToName()">Find Matches</button>
  <pre id="charIDOut"></pre>
</section>

<section>
  <h2>Color (Tint) IDs</h2>
  <label>Color hex code → Tint ID</label>
  <input id="colName" type="text" placeholder="#RRGGBB" />
  <div class="dropdown" id="pickerDropdown">
    <button class="toggle-btn" onclick="toggleDropdown()">
      Advanced picker <span class="triangle">⌵</span>
    </button>
    <div class="dropdown-content">
      <label>Color picker:</label><br/>
      <input type="color" id="colorPicker" class="small-color"
             onchange="colName.value=this.value; colNameToID()" /><br/>
      <label>Image eyedropper:</label><br/>
      <input type="file" id="imageLoader"
             accept=".dds,.DDS,.tex,.TEX,image/*" />
      <canvas id="imageCanvas"></canvas>
    </div>
  </div>
  <button onclick="colNameToID()">Get Tint ID</button>
  <pre id="colNameOut"></pre>
  <hr/>
  <label>ID → Hex code + preview</label>
  <input id="colID" type="text" placeholder="e.g. -5744098" />
  <button onclick="colIDToHex()">Show Hex & Preview</button>
  <pre id="colIDOut"></pre>
</section>

<canvas id="glCanvas"></canvas>

<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.149.0/build/three.module.js",
    "three/examples/jsm/loaders/DDSLoader.js":
      "https://unpkg.com/three@0.149.0/examples/jsm/loaders/DDSLoader.js"
  }
}
</script>

<script type="module">
import * as THREE from 'three';
import { DDSLoader } from 'three/examples/jsm/loaders/DDSLoader.js';

// … your existing module code for hashing, color-ID, DDSLoader/WebGL readback, eyedropper …

</script>
</body>
</html>
